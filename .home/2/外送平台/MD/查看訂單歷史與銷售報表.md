<h1 align='center'>UC-查看訂單歷史與銷售報表</h1>

| 欄位         | 內容 |
|--------------|------|
| UseCase ID   | 15 |
| Actor        | 餐廳業者 |
| 描述         | 餐廳業者查看過去的訂單歷史記錄，並產生銷售報表分析營運狀況。 |

---

## 正常程序
```text
1. 餐廳業者登入系統。
2. 系統顯示訂單歷史查詢介面。
3. 餐廳業者選擇查詢日期範圍 (例如：過去七天、過去一個月、自訂日期)。
4. 系統根據選擇的日期範圍，顯示所有訂單的詳細資訊，包含訂單編號、訂單日期、顧客資訊、餐點明細、總金額、付款方式等。
5. 餐廳業者可選擇下載訂單歷史記錄為 CSV 或 PDF 檔案。
6. 系統提供銷售報表產生功能，餐廳業者可選擇報表類型 (例如：每日銷售額、每週銷售額、各餐點銷售量排名)。
7. 系統根據選擇的報表類型，產生對應的銷售報表，並提供圖表視覺化呈現。
8. 餐廳業者可選擇下載銷售報表為 CSV 或 PDF 檔案。
9. 餐廳業者登出系統。
```

## 例外程序
```text
1. 登入失敗：使用者名稱或密碼錯誤，系統顯示錯誤訊息並要求重新登入。
2. 權限不足：使用者沒有查看訂單歷史與銷售報表的權限，系統顯示錯誤訊息。
3. 資料庫錯誤：系統無法連接資料庫或查詢資料庫失敗，系統顯示錯誤訊息並記錄錯誤日誌。
4. 檔案下載失敗：系統無法產生或下載 CSV/PDF 檔案，系統顯示錯誤訊息並記錄錯誤日誌。
5. 網路連線中斷：網路連線斷開，系統顯示錯誤訊息並要求重新連線。
6. 系統錯誤：系統發生未預期錯誤，系統顯示錯誤訊息並記錄錯誤日誌，建議餐廳業者聯繫技術支援。
```

## 前置條件
```text
1. 餐廳業者已註冊並擁有系統帳號。
2. 餐廳業者已登入系統。
3. 系統正常運作且連接至資料庫。
4. 餐廳業者擁有查看訂單歷史與銷售報表的權限。

```

## 後置條件
```text
1. 餐廳業者已查看過去的訂單歷史記錄。
2. 餐廳業者已取得並下載(如有需要)銷售報表。
3. 系統已記錄使用者操作日誌。

```

---

## 正常程序(三段式)
| 步驟 | 類型 | 說明 |
|------|------|------|
| 1 | Request | 餐廳業者輸入帳號密碼並點擊登入 |
| 2 | Process | 系統驗證帳號密碼 |
| 3 | Response | 顯示訂單歷史查詢介面或錯誤訊息 |
| 4 | Request | 餐廳業者選擇查詢日期範圍 |
| 5 | Process | 系統根據選擇的日期範圍查詢訂單資料 |
| 6 | Response | 顯示符合條件的訂單詳細資訊 |
| 7 | Request | 餐廳業者選擇下載訂單歷史記錄 |
| 8 | Process | 系統產生CSV或PDF檔案 |
| 9 | Response | 下載訂單歷史記錄檔案 |
| 10 | Request | 餐廳業者選擇報表類型 |
| 11 | Process | 系統根據選擇的報表類型產生銷售報表 |
| 12 | Response | 顯示銷售報表及圖表視覺化呈現 |
| 13 | Request | 餐廳業者選擇下載銷售報表 |
| 14 | Process | 系統產生CSV或PDF檔案 |
| 15 | Response | 下載銷售報表檔案 |
| 16 | Request | 餐廳業者點擊登出 |
| 17 | Process | 系統清除使用者Session |
| 18 | Response | 登出系統 |

## 例外程序(三段式)
| 步驟 | 類型 | 說明 |
|------|------|------|
| 1 | Request | 使用者輸入帳號密碼進行登入 |
| 2 | Process | 系統驗證帳號密碼 |
| 3 | Response | 系統顯示帳號密碼錯誤訊息，並要求重新登入 |
| 4 | Request | 使用者嘗試存取訂單歷史與銷售報表 |
| 5 | Process | 系統檢查使用者權限 |
| 6 | Response | 系統顯示權限不足的錯誤訊息 |
| 7 | Request | 系統嘗試連接資料庫並查詢資料 |
| 8 | Process | 系統發生資料庫連線或查詢錯誤 |
| 9 | Response | 系統顯示資料庫錯誤訊息並記錄錯誤日誌 |
| 10 | Request | 使用者請求下載CSV/PDF檔案 |
| 11 | Process | 系統嘗試產生或下載CSV/PDF檔案 |
| 12 | Response | 系統顯示檔案下載失敗訊息並記錄錯誤日誌 |
| 13 | Request | 使用者操作系統 |
| 14 | Process | 系統偵測到網路連線中斷 |
| 15 | Response | 系統顯示網路連線中斷訊息並要求重新連線 |
| 16 | Request | 系統執行程式碼 |
| 17 | Process | 系統發生未預期錯誤 |
| 18 | Response | 系統顯示系統錯誤訊息，記錄錯誤日誌，並建議聯繫技術支援 |
